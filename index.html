<!DOCTYPE html>
<html>

<body>

    <h2>Upload Minecraft Skin</h2>
    <form action="">
        <input type="file" id="minecraftSkin" name="minecraftSkin">
        <br><br>
        <input type="button" value="Submit" onclick="processImage()">
    </form>

    <canvas id="skin_container"></canvas>
    <a id="download" href="" download="ModifiedSkin.png">Download</a>

    <script src="https://path.to/skinview3d.js"></script>
    <script>

        // Initialize the skin viewer
        let skinViewer = new skinview3d.SkinViewer({
            canvas: document.getElementById("skin_container"),
            width: 300,
            height: 400,
        });

        function processImage() {
            let skinFile = document.getElementById('minecraftSkin').files[0];
            let reader = new FileReader();

            reader.onload = function (e) {
                // Create a new canvas to overlay the images
                let canvas = new OffscreenCanvas(64, 64);
                let context = canvas.getContext('2d');

                let skinImage = new Image();
                skinImage.src = e.target.result;

                skinImage.onload = function () {
                    // Draw the Minecraft skin
                    context.drawImage(skinImage, 0, 0);

                    // Load the overlay image (replace with your base64 image)
                    let overlayImage = new Image();
                    overlayImage.src = 'data:image/png;base64,...';

                    overlayImage.onload = function () {
                        // Overlay the transparent image
                        context.drawImage(overlayImage, 0, 0);

                        // Convert canvas to data URL
                        let dataURL = canvas.toDataURL('image/png');

                        // Update the skin viewer
                        skinViewer.loadSkin(dataURL);

                        // Update the download link
                        document.getElementById('download').href = dataURL;
                    };
                };
            };

            // Start reading the skin file
            reader.readAsDataURL(skinFile);
        }

    </script>

</body>

</html>
